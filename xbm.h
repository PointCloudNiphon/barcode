/*
 * XBM
 */
 
#define XBM_OUTPUT_DATA_COLUMNS	10

typedef struct {
   int width;
   int height;
   int byteWidth;
   unsigned char *data;
} XBM;

static unsigned char font5x8Buf[] =  {
	/* Code teaser */
   0x00, 0x68, 0x74, 0x74, 0x70, 0x3a, 0x2f, 0x77, 
   0x77, 0x77, 0x2e, 0x64, 0x65, 0x67, 0x72, 0x75, 
   0x6e, 0x74, 0x2e, 0x6e, 0x6c, 0x2f, 0x62, 0x61, 
   0x72, 0x63, 0x6f, 0x64, 0x65, 0x2f, 0x00, 0x00, 
	/* Free area */
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00,
   /* Start of real Font */
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x02, 0x02, 0x02, 0x02, 0x02, 0x00, 0x02, 0x00, 
   0x05, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x05, 0x05, 0x0f, 0x05, 0x0f, 0x05, 0x05, 0x00,
   0x02, 0x0f, 0x01, 0x0f, 0x08, 0x0f, 0x04, 0x00,
   0x0b, 0x0b, 0x08, 0x06, 0x01, 0x0d, 0x0d, 0x00, 
   0x03, 0x05, 0x02, 0x05, 0x0d, 0x05, 0x0b, 0x00,
   0x04, 0x04, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00,
   0x04, 0x02, 0x02, 0x02, 0x02, 0x02, 0x04, 0x00, 
   0x02, 0x04, 0x04, 0x04, 0x04, 0x04, 0x02, 0x00,
   0x00, 0x09, 0x06, 0x0f, 0x06, 0x09, 0x00, 0x00,
   0x00, 0x02, 0x02, 0x07, 0x02, 0x02, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x04, 0x04, 0x06, 0x00,
   0x00, 0x00, 0x00, 0x0f, 0x00, 0x00, 0x00, 0x00,
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02, 0x00, 
   0x08, 0x08, 0x04, 0x06, 0x02, 0x01, 0x01, 0x00,
   0x0f, 0x09, 0x09, 0x09, 0x09, 0x09, 0x0f, 0x00,
   0x06, 0x04, 0x04, 0x04, 0x04, 0x04, 0x0f, 0x00, 
   0x0f, 0x09, 0x08, 0x0f, 0x01, 0x09, 0x0f, 0x00,
   0x0f, 0x08, 0x08, 0x0f, 0x08, 0x08, 0x0f, 0x00,
   0x09, 0x09, 0x09, 0x0f, 0x08, 0x08, 0x08, 0x00, 
   0x0f, 0x09, 0x01, 0x0f, 0x08, 0x09, 0x0f, 0x00,
   0x03, 0x01, 0x01, 0x0f, 0x09, 0x09, 0x0f, 0x00,
   0x0f, 0x09, 0x09, 0x0c, 0x04, 0x04, 0x04, 0x00, 
   0x0f, 0x09, 0x09, 0x0f, 0x09, 0x09, 0x0f, 0x00,
   0x0f, 0x09, 0x09, 0x0f, 0x08, 0x08, 0x08, 0x00,
   0x00, 0x02, 0x00, 0x00, 0x00, 0x02, 0x00, 0x00, 
   0x00, 0x04, 0x00, 0x00, 0x04, 0x04, 0x06, 0x00,
   0x08, 0x04, 0x02, 0x01, 0x02, 0x04, 0x08, 0x00, 
   0x00, 0x00, 0x0f, 0x00, 0x0f, 0x00, 0x00, 0x00, 
   0x01, 0x02, 0x04, 0x08, 0x04, 0x02, 0x01, 0x00,
   0x0f, 0x09, 0x08, 0x0e, 0x02, 0x00, 0x02, 0x00, 
   0x0f, 0x09, 0x0d, 0x0d, 0x0d, 0x01, 0x0f, 0x00, 
   0x0f, 0x09, 0x09, 0x0f, 0x09, 0x09, 0x09, 0x00,
   0x07, 0x09, 0x09, 0x07, 0x09, 0x09, 0x07, 0x00,
   0x0f, 0x01, 0x01, 0x01, 0x01, 0x01, 0x0f, 0x00, 
   0x07, 0x09, 0x09, 0x09, 0x09, 0x09, 0x07, 0x00,
   0x0f, 0x01, 0x01, 0x0f, 0x01, 0x01, 0x0f, 0x00, 
   0x0f, 0x01, 0x01, 0x0f, 0x01, 0x01, 0x01, 0x00, 
   0x0f, 0x01, 0x01, 0x0d, 0x09, 0x09, 0x0f, 0x00,
   0x09, 0x09, 0x09, 0x0f, 0x09, 0x09, 0x09, 0x00, 
   0x07, 0x02, 0x02, 0x02, 0x02, 0x02, 0x07, 0x00, 
   0x0e, 0x04, 0x04, 0x04, 0x04, 0x05, 0x07, 0x00,
   0x09, 0x09, 0x09, 0x07, 0x09, 0x09, 0x09, 0x00, 
   0x01, 0x01, 0x01, 0x01, 0x01, 0x01, 0x0f, 0x00, 
   0x09, 0x0f, 0x0f, 0x0f, 0x09, 0x09, 0x09, 0x00,
   0x09, 0x0b, 0x0d, 0x09, 0x09, 0x09, 0x09, 0x00, 
   0x0f, 0x09, 0x09, 0x09, 0x09, 0x09, 0x0f, 0x00, 
   0x0f, 0x09, 0x09, 0x0f, 0x01, 0x01, 0x01, 0x00,
   0x0f, 0x09, 0x09, 0x09, 0x0b, 0x05, 0x0b, 0x00, 
   0x07, 0x09, 0x09, 0x07, 0x09, 0x09, 0x09, 0x00, 
   0x0f, 0x01, 0x01, 0x0f, 0x08, 0x08, 0x0f, 0x00,
   0x0f, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x00, 
   0x09, 0x09, 0x09, 0x09, 0x09, 0x09, 0x0f, 0x00, 
   0x09, 0x09, 0x09, 0x09, 0x09, 0x05, 0x02, 0x00,
   0x09, 0x09, 0x09, 0x09, 0x0f, 0x0f, 0x09, 0x00, 
   0x09, 0x09, 0x05, 0x06, 0x0a, 0x09, 0x09, 0x00, 
   0x09, 0x09, 0x09, 0x0f, 0x08, 0x08, 0x0f, 0x00,
   0x0f, 0x08, 0x08, 0x06, 0x01, 0x01, 0x0f, 0x00, 
   0x0e, 0x02, 0x02, 0x02, 0x02, 0x02, 0x0e, 0x00, 
   0x01, 0x01, 0x02, 0x06, 0x04, 0x08, 0x08, 0x00,
   0x07, 0x04, 0x04, 0x04, 0x04, 0x04, 0x07, 0x00, 
   0x02, 0x05, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x00,
   0x02, 0x02, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x00, 0x00, 0x0f, 0x08, 0x0f, 0x09, 0x0f, 0x00, 
   0x01, 0x01, 0x0f, 0x09, 0x09, 0x09, 0x0f, 0x00,
   0x00, 0x00, 0x0f, 0x01, 0x01, 0x01, 0x0f, 0x00, 
   0x08, 0x08, 0x0f, 0x09, 0x09, 0x09, 0x0f, 0x00, 
   0x00, 0x00, 0x0f, 0x09, 0x0f, 0x01, 0x0f, 0x00,
   0x0e, 0x02, 0x0f, 0x02, 0x02, 0x02, 0x02, 0x00, 
   0x00, 0x00, 0x0f, 0x09, 0x09, 0x0f, 0x08, 0x0c, 
   0x01, 0x01, 0x0f, 0x09, 0x09, 0x09, 0x09, 0x00,
   0x02, 0x00, 0x03, 0x02, 0x02, 0x02, 0x07, 0x00,
   0x04, 0x00, 0x04, 0x04, 0x04, 0x04, 0x05, 0x07, 
   0x01, 0x01, 0x09, 0x05, 0x03, 0x05, 0x09, 0x00,
   0x03, 0x02, 0x02, 0x02, 0x02, 0x02, 0x07, 0x00,
   0x00, 0x00, 0x09, 0x0f, 0x0f, 0x09, 0x09, 0x00, 
   0x00, 0x00, 0x0f, 0x09, 0x09, 0x09, 0x09, 0x00,
   0x00, 0x00, 0x0f, 0x09, 0x09, 0x09, 0x0f, 0x00,
   0x00, 0x00, 0x0f, 0x09, 0x09, 0x0f, 0x01, 0x01, 
   0x00, 0x00, 0x0f, 0x09, 0x09, 0x0f, 0x08, 0x08,
   0x00, 0x00, 0x0f, 0x01, 0x01, 0x01, 0x01, 0x00,
   0x00, 0x00, 0x0f, 0x01, 0x0f, 0x08, 0x0f, 0x00, 
   0x00, 0x02, 0x0f, 0x02, 0x02, 0x02, 0x0e, 0x00,
   0x00, 0x00, 0x09, 0x09, 0x09, 0x09, 0x0f, 0x00,
   0x00, 0x00, 0x09, 0x09, 0x09, 0x05, 0x02, 0x00, 
   0x00, 0x00, 0x09, 0x09, 0x0f, 0x0f, 0x09, 0x00,
   0x00, 0x00, 0x09, 0x09, 0x06, 0x09, 0x09, 0x00,
   0x00, 0x00, 0x09, 0x09, 0x09, 0x0f, 0x08, 0x0c, 
   0x00, 0x00, 0x0f, 0x08, 0x06, 0x01, 0x0f, 0x00,
   0x08, 0x04, 0x04, 0x02, 0x04, 0x04, 0x08, 0x00,
   0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x02, 0x00, 
   0x01, 0x02, 0x02, 0x04, 0x02, 0x02, 0x01, 0x00,
   0x00, 0x0a, 0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 
   0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x00
};

static XBM font5x8 = { 8, 1024, 1, font5x8Buf };

/**
 * newXBM
 *
 * XBM 'constructor'
 *
 * @param	width		width of the resulting XBM
 * @param	height	height of the resulting XBM
 */
XBM *newXBM( int width, int height );

/**
 * freeXBM
 *
 * XBM 'destructor'
 *
 * @param	xbm	reference to the XBM to be cleared
 */
void freeXBM( XBM *xbm );

/**
 * xbmGetByte
 *
 * Returns the byte at a certain xByte, y-pixel location in a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	xByte		x-byte location in the XBM
 * @param	y			y-pixel location in the XBM
 * 
 * @returns	the byte at the requested location, or zero if out-of-range
 */
int xbmGetByte( XBM *xbm, int xByte, int y );

/**
 * xbmGet
 *
 * Returns the bit-value at a certain x-pixel, y-pixel location in a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	x			x-pixel location in the XBM
 * @param	y			y-pixel location in the XBM
 * 
 * @returns	the bit-value at the requested location
 */
int xbmGet( XBM *xbm, int x, int y );

/**
 * xbmSet
 *
 * Sets the bit-value at a certain x-pixel, y-pixel location in a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	x			x-pixel location in the XBM
 * @param	y			y-pixel location in the XBM
 * @param	value		value of the bit you want to set
 */
void xbmSet( XBM *xbm, int x, int y, int value );

/**
 * xbmCopyRect
 *
 * Copies (part of) a XBM to another XBM
 *
 * @param	to			reference to the destination XBM
 * @param	dx			destination x-pixel location in the destination XBM
 * @param	dy			destination y-pixel location in the destination XBM
 * @param	from		reference to the source XBM
 * @param	sx			source x-pixel location in the source XBM
 * @param	sy			source y-pixel location in the source XBM
 * @param	width		width of the rect to be copied
 * @param	height	height of the rect to be copied
 */
void xbmCopyRect( XBM *to, int dx, int dy, XBM *from, int sx, int sy, int width, int height );

/**
 * xbmHline
 *
 * Draws an horizontal line in a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	y			y-pixel location in the XBM
 * @param	x1			from x-pixel location in the XBM
 * @param	x2			to x-pixel location in the XBM
 * @param	value		value of the bit you want to set
 */
void xbmHline( XBM *xbm, int y, int x1, int x2 );

/**
 * xbmVline
 *
 * Draws an vertical line in a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	x			y-pixel location in the XBM
 * @param	y1			from y-pixel location in the XBM
 * @param	y2			to y-pixel location in the XBM
 * @param	value		value of the bit you want to set
 */
void xbmVline( XBM *xbm, int x, int y1, int y2 );

/**
 * xbmDrawChar5x8
 *
 * Draws an charater in a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	x			x-pixel location in the XBM
 * @param	y			y-pixel location in the XBM
 * @param	c			character to draw
 */
void xbmDrawChar5x8( XBM *xbm, int x, int y, char c );

/**
 * xbmDrawString5x8
 *
 * Draws an string in a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	x			x-pixel location in the XBM
 * @param	y			y-pixel location in the XBM
 * @param	str		string to draw
 */
void xbmDrawString5x8( XBM *xbm, int x, int y, char *str );

/**
 * xbmSaveXBM
 *
 * Saves a XBM
 *
 * @param	xbm		reference to a XBM
 * @param	name		name of the XBM
 * @param	comment	comment to be written in the XBM file
 */
void xbmSaveXBM( XBM *xbm, char *name, char *comment );







